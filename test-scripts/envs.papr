graph denv {
    |gate decay| -> |out|
    ~ {
        let reset = redge(gate);
        let t_trig = var(t reset);
        let dif = (t - t_trig);
        out = (max(0 ((decay - dif) / decay)) * gate);
    }
}